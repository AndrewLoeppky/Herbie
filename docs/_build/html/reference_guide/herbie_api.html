
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Herbie API &#8212; Herbie 0.0.5 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/brian_style.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://kit.fontawesome.com/f6cc126dcc.js"></script>
    <link rel="shortcut icon" href="../_static/wxicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="HRRR-B API" href="hrrrb_api.html" />
    <link rel="prev" title="Reference Guide" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/HerbieLogo2_white_transparent.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../user_guide/index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Reference Guide
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://blaylockbk.github.io/SynopticPy/_build/html/">SynopticPy<i class="fas fa-external-link-alt"></i></a>
    </li>
    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://blaylockbk.github.io/goes2go/_build/html/">GOES-2-go<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/blaylockbk/Herbie" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/blaylockbk" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
      </ul>
      </div>
      
      <div class="navbar-end-item">
        <form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Herbie API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="hrrrb_api.html">
   HRRR-B API
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#herbie-retrieve-nwp-model-data">
   Herbie: Retrieve NWP Model Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#herbie-extension-xarray-accessors">
   Herbie Extension: xarray accessors
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#herbie-tools">
   Herbie Tools
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                

<div class="tocsection editthispage">
    <a href="https://github.com/blaylockbk/Herbie/edit/master/docs/reference_guide/herbie_api.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="module-herbie.archive">
<span id="herbie-api"></span><h1>Herbie API<a class="headerlink" href="#module-herbie.archive" title="Permalink to this headline">¬∂</a></h1>
<div class="section" id="herbie-retrieve-nwp-model-data">
<h2>Herbie: Retrieve NWP Model Data<a class="headerlink" href="#herbie-retrieve-nwp-model-data" title="Permalink to this headline">¬∂</a></h2>
<p>Herbie is your model output download assistant with a mind of his own!
Herbie might look small on the outside, but he has a big heart on the
inside and will get you to the
<a class="reference external" href="https://www.youtube.com/watch?v=4XWufUZ1mxQ&amp;t=189s">finish line</a>.
Happy racing! üèéüèÅ</p>
<p><a class="reference external" href="https://blaylockbk.github.io/Herbie/_build/html/">üìî Documentation</a></p>
<p>With Herbie‚Äôs API, you can search and download GRIB2 model output files
from different archive sources for the High-Resolution Rapid Refresh
(HRRR) HRRR-Alaska, Rapid Refresh (RAP), Global Forecast System (GFS),
and others.</p>
<p>Herbie looks for GRIB2 model output data from NOMADS, NOAA‚Äôs Big Data
Project partners (Amazon Web Services, Google Cloud Platform, and
Microsoft Azure), and the CHPC Pando archive at the University of Utah.</p>
<p>Herbie supports subsetting of GRIB2 files by individual GRIB
messages (i.e. variable and level) when the index (.idx) file exist and
help you open them with xarray/cfgrib.</p>
<p>Herbie is extendable to support other models. Simply create a template
file in the <code class="docutils literal notranslate"><span class="pre">herbie/models</span></code> directory and make a pull-request.</p>
<p>For more details, see <a class="reference external" href="https://blaylockbk.github.io/Herbie/_build/html/user_guide/data_sources.html">https://blaylockbk.github.io/Herbie/_build/html/user_guide/data_sources.html</a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Updates since the <code class="docutils literal notranslate"><span class="pre">Herbie</span> <span class="pre">0.0.5</span></code> release</p>
<ul class="simple">
<li><p>TODO: Rename ‚ÄòsearchString‚Äô to ‚Äòsubset‚Äô (and rename subset function)</p></li>
<li><p>TODO: Create .idx file if wgrib2 is installed (linux only) when index file doesn‚Äôt exist</p></li>
<li><p>TODO: add <cite>idx_to_df()</cite> and <cite>df_to_idx()</cite> methods.</p></li>
<li><p>TODO: clean up document examples. It‚Äôs kind of scattered now.</p></li>
</ul>
</div>
<p><strong>Classes:</strong></p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Herbie</span></code>([date,¬†valid_date,¬†model,¬†fxx,¬†‚Ä¶])</p></td>
<td><p>Locate GRIB2 file at one of the archive sources.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="herbie.archive.Herbie">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">herbie.archive.</span></span><span class="sig-name descname"><span class="pre">Herbie</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'hrrr'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fxx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">product</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">member</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">PosixPath('/p/cwfs/blaylock/data')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#herbie.archive.Herbie" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Locate GRIB2 file at one of the archive sources.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> (<em>pandas-parsable datetime</em>) ‚Äì <em>Model initialization datetime</em>.
If None, then must set <code class="docutils literal notranslate"><span class="pre">valid_date</span></code>.</p></li>
<li><p><strong>valid_date</strong> (<em>pandas-parsable datetime</em>) ‚Äì Model valid datetime. Must set when <code class="docutils literal notranslate"><span class="pre">date</span></code> is None.</p></li>
<li><p><strong>fxx</strong> (<em>int</em>) ‚Äì Forecast lead time in hours. Available lead times depend on
the model type and model version. Range is model and run
dependant.</p></li>
<li><p><strong>model</strong> (<em>{'hrrr'</em><em>, </em><em>'hrrrak'</em><em>, </em><em>'rap'</em><em>, </em><em>'gfs'</em><em>, </em><em>'gfs_wave'</em><em>, </em><em>'rrfs'</em><em>, </em><em>etc.}</em>) ‚Äì Model name as defined in the models template folder. CASE INSENSITIVE
Some examples:
- <code class="docutils literal notranslate"><span class="pre">'hrrr'</span></code> HRRR contiguous United States model
- <code class="docutils literal notranslate"><span class="pre">'hrrrak'</span></code> HRRR Alaska model (alias <code class="docutils literal notranslate"><span class="pre">'alaska'</span></code>)
- <code class="docutils literal notranslate"><span class="pre">'rap'</span></code> RAP model</p></li>
<li><p><strong>product</strong> (<em>{'sfc'</em><em>, </em><em>'prs'</em><em>, </em><em>'nat'</em><em>, </em><em>'subh'}</em>) ‚Äì Output variable product file type. If not specified, will
use first product in model template file. CASE SENSITIVE.
For example, the HRRR model has these products:
- <code class="docutils literal notranslate"><span class="pre">'sfc'</span></code> surface fields
- <code class="docutils literal notranslate"><span class="pre">'prs'</span></code> pressure fields
- <code class="docutils literal notranslate"><span class="pre">'nat'</span></code> native fields
- <code class="docutils literal notranslate"><span class="pre">'subh'</span></code> subhourly fields</p></li>
<li><p><strong>member</strong> (<em>None</em><em> or </em><em>int</em>) ‚Äì Some ensemble models (e.g. the future RRFS) will need to
specify an ensemble member.</p></li>
<li><p><strong>priority</strong> (<em>list</em><em> or </em><em>str</em>) ‚Äì List of model sources to get the data in the order of
download priority. CASE INSENSITIVE. Some example data
sources and the default priority order are listed below.
- <code class="docutils literal notranslate"><span class="pre">'aws'</span></code> Amazon Web Services (Big Data Program)
- <code class="docutils literal notranslate"><span class="pre">'nomads'</span></code> NOAA‚Äôs NOMADS server
- <code class="docutils literal notranslate"><span class="pre">'google'</span></code> Google Cloud Platform (Big Data Program)
- <code class="docutils literal notranslate"><span class="pre">'azure'</span></code> Microsoft Azure (Big Data Program)
- <code class="docutils literal notranslate"><span class="pre">'pando'</span></code> University of Utah Pando Archive (gateway 1)
- <code class="docutils literal notranslate"><span class="pre">'pando2'</span></code> University of Utah Pando Archive (gateway 2)</p></li>
<li><p><strong>save_dir</strong> (<em>str</em><em> or </em><em>pathlib.Path</em>) ‚Äì Location to save GRIB2 files locally. Default save directory
is set in <code class="docutils literal notranslate"><span class="pre">~/.config/herbie/config.cfg</span></code>.</p></li>
<li><p><strong>Overwrite</strong> (<em>bool</em>) ‚Äì If True, look for GRIB2 files even if local copy exists.
If False (default), use the local copy (still need to find
the idx file).</p></li>
</ul>
</dd>
</dl>
<p><strong>Methods:</strong></p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code>([date,¬†valid_date,¬†model,¬†fxx,¬†‚Ä¶])</p></td>
<td><p>Specify model output and find GRIB2 file at one of the sources.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">download</span></code>([searchString,¬†source,¬†save_dir,¬†‚Ä¶])</p></td>
<td><p>Download file from source.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_localFilePath</span></code>([searchString])</p></td>
<td><p>Get path to local file</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_idx</span></code>([searchString])</p></td>
<td><p>Inspect the GRIB2 file contents by reading the index file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">xarray</span></code>(searchString[,¬†backend_kwargs,¬†‚Ä¶])</p></td>
<td><p>Open GRIB2 data as xarray DataSet</p></td>
</tr>
</tbody>
</table>
<p><strong>Attributes:</strong></p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_localFileName</span></code></p></td>
<td><p>Predict Local File Name</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_remoteFileName</span></code></p></td>
<td><p>Predict Remote File Name</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="herbie.archive.Herbie.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'hrrr'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fxx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">product</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">member</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">PosixPath('/p/cwfs/blaylock/data')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#herbie.archive.Herbie.__init__" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Specify model output and find GRIB2 file at one of the sources.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="herbie.archive.Herbie.download">
<span class="sig-name descname"><span class="pre">download</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">searchString</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'warn'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#herbie.archive.Herbie.download" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Download file from source.</p>
<p>Subsetting by variable follows the same principles described here:
<a class="reference external" href="https://www.cpc.ncep.noaa.gov/products/wesley/fast_downloading_grib.html">https://www.cpc.ncep.noaa.gov/products/wesley/fast_downloading_grib.html</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>searchString</strong> (<em>str</em>) ‚Äì If None, download the full file. Else, use regex to subset
the file by specific variables and levels.
.. include:: ../user_guide/searchString.rst</p></li>
<li><p><strong>source</strong> (<em>{'nomads'</em><em>, </em><em>'aws'</em><em>, </em><em>'google'</em><em>, </em><em>'azure'</em><em>, </em><em>'pando'</em><em>, </em><em>'pando2'}</em>) ‚Äì If None, download GRIB2 file from self.grib2 which is
the first location the GRIB2 file was found from the
priority lists when this class was initialized. Else, you
may specify the source to force downloading it from a
different location.</p></li>
<li><p><strong>save_dir</strong> (<em>str</em><em> or </em><em>pathlib.Path</em>) ‚Äì Location to save the model output files.
If None, uses the default or path specified in __init__.
Else, changes the path files are saved.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em>) ‚Äì If True, overwrite existing files. Default will skip
downloading if the full file exists. Not applicable when
when searchString is not None because file subsets might
be unique.</p></li>
<li><p><strong>errors</strong> (<em>{'warn'</em><em>, </em><em>'raise'}</em>) ‚Äì When an error occurs, send a warning or raise a value error.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="herbie.archive.Herbie.get_localFileName">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">get_localFileName</span></span><a class="headerlink" href="#herbie.archive.Herbie.get_localFileName" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Predict Local File Name</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="herbie.archive.Herbie.get_localFilePath">
<span class="sig-name descname"><span class="pre">get_localFilePath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">searchString</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#herbie.archive.Herbie.get_localFilePath" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Get path to local file</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="herbie.archive.Herbie.get_remoteFileName">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">get_remoteFileName</span></span><a class="headerlink" href="#herbie.archive.Herbie.get_remoteFileName" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Predict Remote File Name</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="herbie.archive.Herbie.read_idx">
<span class="sig-name descname"><span class="pre">read_idx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">searchString</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#herbie.archive.Herbie.read_idx" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Inspect the GRIB2 file contents by reading the index file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>searchString</strong> (<em>str</em>) ‚Äì <p>Filter dataframe by a searchString regular expression.
Searches for strings in the index file lines, specifically
the variable, level, and forecast_time columns.
Execute <code class="docutils literal notranslate"><span class="pre">_searchString_help()</span></code> for examples of a good
searchString.</p>
<p>Use regular expression to search for lines in the index <code class="docutils literal notranslate"><span class="pre">.idx</span></code> file
Here are some examples you can use for the <code class="docutils literal notranslate"><span class="pre">searchString</span></code> argument</p>
<table class="table">
<colgroup>
<col style="width: 37%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">searchString=</span></code></p></th>
<th class="head"><p>GRIB messages that will be downloaded</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">':TMP:2</span> <span class="pre">m'</span></code></p></td>
<td><p>Temperature at 2 m.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">':TMP:'</span></code></p></td>
<td><p>Temperature fields at all levels.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">':UGRD:.*</span> <span class="pre">mb'</span></code></p></td>
<td><p>U Wind at all pressure levels.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">':500</span> <span class="pre">mb:'</span></code></p></td>
<td><p>All variables on the 500 mb level.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">':APCP:'</span></code></p></td>
<td><p>All accumulated precipitation fields.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">':APCP:surface:0-[1-9]*'</span></code></p></td>
<td><p>Accumulated precip since initialization time</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">':APCP:surface:[1-9]*-[1-9]*'</span></code></p></td>
<td><p>Accumulated precip over last hour</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">':UGRD:10</span> <span class="pre">m'</span></code></p></td>
<td><p>U wind component at 10 meters.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">':(U|V)GRD:(10|80)</span> <span class="pre">m'</span></code></p></td>
<td><p>U and V wind component at 10 and 80 m.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">':(U|V)GRD:'</span></code></p></td>
<td><p>U and V wind component at all levels.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">':.GRD:'</span></code></p></td>
<td><p>(Same as above)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">':(TMP|DPT):'</span></code></p></td>
<td><p>Temperature and Dew Point for all levels .</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">':(TMP|DPT|RH):'</span></code></p></td>
<td><p>TMP, DPT, and Relative Humidity for all levels.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">':REFC:'</span></code></p></td>
<td><p>Composite Reflectivity</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">':surface:'</span></code></p></td>
<td><p>All variables at the surface.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'^TMP:2</span> <span class="pre">m.*fcst$'</span></code></p></td>
<td><p>Beginning of string (^), end of string ($) wildcard (.*)</p></td>
</tr>
</tbody>
</table>
<p>If you need help with regular expression, search the web
or look at this <a class="reference external" href="https://www.petefreitag.com/cheatsheets/regex/">cheatsheet</a>.</p>
<p>The searchString method to subset a GRIB dataset by variable field is
similar to what is explained here: <a class="reference external" href="https://www.cpc.ncep.noaa.gov/products/wesley/fast_downloading_grib.html">https://www.cpc.ncep.noaa.gov/products/wesley/fast_downloading_grib.html</a></p>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>A Pandas DataFrame of the index file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="herbie.archive.Herbie.xarray">
<span class="sig-name descname"><span class="pre">xarray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">searchString</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_grib</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">download_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#herbie.archive.Herbie.xarray" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Open GRIB2 data as xarray DataSet</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>searchString</strong> (<em>str</em>) ‚Äì Variables to read into xarray Dataset</p></li>
<li><p><strong>remove_grib</strong> (<em>bool</em>) ‚Äì If True, grib file will be removed ONLY IF it didn‚Äôt exist
before we downloaded it.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-herbie.accessors"></span><div class="section" id="herbie-extension-xarray-accessors">
<h2>Herbie Extension: xarray accessors<a class="headerlink" href="#herbie-extension-xarray-accessors" title="Permalink to this headline">¬∂</a></h2>
<p>Extend the xarray capabilities with a custom accessor.
<a class="reference external" href="http://xarray.pydata.org/en/stable/internals.html#extending-xarray">http://xarray.pydata.org/en/stable/internals.html#extending-xarray</a></p>
<p>To use the herbie xarray accessor, do this‚Ä¶</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">H</span> <span class="o">=</span> <span class="n">Herbie</span><span class="p">(</span><span class="s1">&#39;2021-01-01&#39;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s1">&#39;hrrr&#39;</span><span class="p">)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">xarray</span><span class="p">(</span><span class="s1">&#39;TMP:2 m&#39;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">herbie</span><span class="o">.</span><span class="n">crs</span>
<span class="n">ds</span><span class="o">.</span><span class="n">herbie</span><span class="o">.</span><span class="n">plot</span>
</pre></div>
</div>
</div>
<span class="target" id="module-herbie.tools"></span><div class="section" id="herbie-tools">
<h2>Herbie Tools<a class="headerlink" href="#herbie-tools" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Functions:</strong></p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#herbie.tools.bulk_download" title="herbie.tools.bulk_download"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bulk_download</span></code></a>(DATES[,¬†searchString,¬†fxx,¬†‚Ä¶])</p></td>
<td><p>Bulk download GRIB2 files from file source to the local machine.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#herbie.tools.xr_concat_sameLead" title="herbie.tools.xr_concat_sameLead"><code class="xref py py-obj docutils literal notranslate"><span class="pre">xr_concat_sameLead</span></code></a>(DATES,¬†searchString[,¬†‚Ä¶])</p></td>
<td><p>Load and concatenate xarray objects by model initialization date for the same lead time.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#herbie.tools.xr_concat_sameRun" title="herbie.tools.xr_concat_sameRun"><code class="xref py py-obj docutils literal notranslate"><span class="pre">xr_concat_sameRun</span></code></a>(DATE,¬†searchString[,¬†fxx])</p></td>
<td><p>Load and concatenate xarray objects by forecast lead time for the same run.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="herbie.tools.bulk_download">
<span class="sig-prename descclassname"><span class="pre">herbie.tools.</span></span><span class="sig-name descname"><span class="pre">bulk_download</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">DATES</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">searchString</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fxx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">range(0,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'hrrr'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">product</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sfc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#herbie.tools.bulk_download" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Bulk download GRIB2 files from file source to the local machine.</p>
<p>Iterates over a list of datetimes (DATES) and forecast lead times (fxx).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>DATES</strong> (<em>list</em>) ‚Äì List of datetimes</p></li>
<li><p><strong>searchString</strong> (<em>None</em><em> or </em><em>str</em>) ‚Äì If None, download the full file. If string, use regex to search
index files for variables and levels of interest and only
download the matched GRIB messages.</p></li>
<li><p><strong>fxx</strong> (<em>int</em><em> or </em><em>list</em>) ‚Äì List of forecast lead times to download. Default only downloads model analysis.</p></li>
<li><p><strong>model</strong> (<em>{'hrrr'</em><em>, </em><em>'hrrrak'</em><em>, </em><em>'rap'}</em>) ‚Äì Model to download.</p></li>
<li><p><strong>product</strong> (<em>{'sfc'</em><em>, </em><em>'prs'</em><em>, </em><em>'nat'</em><em>, </em><em>'subh'}</em>) ‚Äì Variable products file to download. Not needed for RAP model.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="herbie.tools.xr_concat_sameLead">
<span class="sig-prename descclassname"><span class="pre">herbie.tools.</span></span><span class="sig-name descname"><span class="pre">xr_concat_sameLead</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">DATES</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">searchString</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fxx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DATE_is_valid_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#herbie.tools.xr_concat_sameLead" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Load and concatenate xarray objects by model initialization date for the same lead time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>DATES</strong> (<em>list of pandas-parsable datetime</em>) ‚Äì Datetime that represents the model valid time.</p></li>
<li><p><strong>searchString</strong> (<em>str</em>) ‚Äì Variable fields to load. This really only works if the search
string returns data on the same hyper cube.</p></li>
<li><p><strong>fxx</strong> (<em>int</em>) ‚Äì The forecast lead time, in hours.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="herbie.tools.xr_concat_sameRun">
<span class="sig-prename descclassname"><span class="pre">herbie.tools.</span></span><span class="sig-name descname"><span class="pre">xr_concat_sameRun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">DATE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">searchString</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fxx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">range(0,</span> <span class="pre">18)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#herbie.tools.xr_concat_sameRun" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Load and concatenate xarray objects by forecast lead time for the same run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>DATE</strong> (<em>pandas-parsable datetime</em>) ‚Äì A datetime that represents the model initialization time.</p></li>
<li><p><strong>searchString</strong> (<em>str</em>) ‚Äì Variable fields to load. This really only works if the search
string returns data on the same hyper cube.</p></li>
<li><p><strong>fxx</strong> (<em>list of int</em>) ‚Äì List of forecast lead times, in hours, to concat together.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">Reference Guide</a>
    <a class='right-next' id="next-link" href="hrrrb_api.html" title="next page">HRRR-B API</a>

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-PT9LX1B7B8"></script>
<script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){ dataLayer.push(arguments); }
                    gtag('config', 'G-PT9LX1B7B8');
                </script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, Brian K. Blaylock.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.3.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>