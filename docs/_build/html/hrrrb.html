

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>hrrrb &mdash; HRRR-B 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="https://kit.fontawesome.com/f6cc126dcc.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Utilities" href="utils.html" />
    <link rel="prev" title="Welcome to HRRR-B’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> HRRR-B
          

          
            
            <img src="_static/herbie.jpg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">⚙ Code</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">hrrrb</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#retrieve-hrrr-grib2-files-from-archives">Retrieve HRRR GRIB2 files from archives</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hrrr-data-source-priority">HRRR Data Source Priority</a></li>
<li class="toctree-l3"><a class="reference internal" href="#main-functions">Main Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tools-for-the-hrrr-archive">Tools for the HRRR Archive</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hrrr-plots">HRRR Plots</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utilities</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HRRR-B</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>hrrrb</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/hrrrb.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hrrrb">
<h1>hrrrb<a class="headerlink" href="#hrrrb" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<span class="target" id="module-hrrrb.archive"></span><div class="section" id="retrieve-hrrr-grib2-files-from-archives">
<h2>Retrieve HRRR GRIB2 files from archives<a class="headerlink" href="#retrieve-hrrr-grib2-files-from-archives" title="Permalink to this headline">¶</a></h2>
<p>Download HRRR GRIB2 files from different archive sources.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">.idx</span></code> file must also exist for subsetting the file by GRIB message.</p>
<div class="section" id="hrrr-data-source-priority">
<h3>HRRR Data Source Priority<a class="headerlink" href="#hrrr-data-source-priority" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><dl class="simple">
<dt>NOMAS: NOAA Operational Model Archive and Distribution System</dt><dd><ul class="simple">
<li><p><a class="reference external" href="https://nomads.ncep.noaa.gov/">https://nomads.ncep.noaa.gov/</a></p></li>
<li><p>Available for today’s and yesterday’s runs</p></li>
<li><p>Original data source. All available data.</p></li>
<li><p>Includes <code class="docutils literal notranslate"><span class="pre">.idx</span></code> for all GRIB2 files.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Pando: The University of Utah HRRR archive</dt><dd><ul class="simple">
<li><p><a class="reference external" href="http://hrrr.chpc.utah.edu/">http://hrrr.chpc.utah.edu/</a></p></li>
<li><p>Available from July 15, 2016 to Present.</p></li>
<li><p>A subset of prs and sfc files.</p></li>
<li><p>Contains a <code class="docutils literal notranslate"><span class="pre">.idx</span></code> file for <em>every</em> GRIB2 file for subsetting.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Google: Google Cloud Platform Earth</dt><dd><ul class="simple">
<li><p><a class="reference external" href="https://console.cloud.google.com/storage/browser/high-resolution-rapid-refresh">https://console.cloud.google.com/storage/browser/high-resolution-rapid-refresh</a></p></li>
<li><p>Available from July 30, 2014 to Present.</p></li>
<li><p>Does not have <code class="docutils literal notranslate"><span class="pre">.idx</span></code> files before September 17, 2018.</p></li>
<li><p>Has all nat, subh, prs, and sfc files for all forecast hours.</p></li>
</ul>
</dd>
</dl>
</li>
</ol>
</div>
<div class="section" id="main-functions">
<h3>Main Functions<a class="headerlink" href="#main-functions" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>download_hrrr</dt><dd><p>Download GRIB2 files to local disk.</p>
</dd>
<dt>get_hrrr</dt><dd><p>Read HRRR data as an xarray.Dataset with cfgrib engine.</p>
</dd>
</dl>
<p><strong>Classes:</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Path</span></code>(*args, **kwargs)</p></td>
<td><p>PurePath subclass that can make system calls.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">datetime</span></code>(year, month, day[, hour[, minute[, …)</p></td>
<td><p>The year, month and day arguments are required.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">timedelta</span></code></p></td>
<td><p>Difference between two datetime values.</p></td>
</tr>
</tbody>
</table>
<p><strong>Functions:</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#hrrrb.archive.download_hrrr" title="hrrrb.archive.download_hrrr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">download_hrrr</span></code></a>(DATES[, searchString, fxx, …])</p></td>
<td><p>Download full HRRR grib2 files for a list of dates and forecasts.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hrrrb.archive.download_hrrr_subset" title="hrrrb.archive.download_hrrr_subset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">download_hrrr_subset</span></code></a>(url, searchString, *[, …])</p></td>
<td><p>Download a subset of GRIB fields from a HRRR file located at a URL.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_crs</span></code>(ds)</p></td>
<td><p>Get the cartopy coordinate reference system (crs) from a cfgrib xarray Dataset</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hrrrb.archive.get_hrrr" title="hrrrb.archive.get_hrrr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_hrrr</span></code></a>(DATE, searchString, *[, fxx, …])</p></td>
<td><p>Download HRRR data and return as an xarray Dataset (or Datasets)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hrrrb.archive.outFile_from_url" title="hrrrb.archive.outFile_from_url"><code class="xref py py-obj docutils literal notranslate"><span class="pre">outFile_from_url</span></code></a>(url, download_dir)</p></td>
<td><p>Define the filename for a grib2 file from its URL.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_180</span></code>(lon)</p></td>
<td><p>Wrap longitude from degrees [0, 360] to degrees [-180, 180].</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt id="hrrrb.archive.download_hrrr">
<code class="sig-prename descclassname">hrrrb.archive.</code><code class="sig-name descname">download_hrrr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">DATES</span></em>, <em class="sig-param"><span class="n">searchString</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">fxx</span><span class="o">=</span><span class="default_value">range(0, 1)</span></em>, <em class="sig-param"><span class="n">model</span><span class="o">=</span><span class="default_value">'hrrr'</span></em>, <em class="sig-param"><span class="n">field</span><span class="o">=</span><span class="default_value">'sfc'</span></em>, <em class="sig-param"><span class="n">download_dir</span><span class="o">=</span><span class="default_value">WindowsPath('C:/Users/blaylockbk/data')</span></em>, <em class="sig-param"><span class="n">dryrun</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hrrrb.archive.download_hrrr" title="Permalink to this definition">¶</a></dt>
<dd><p>Download full HRRR grib2 files for a list of dates and forecasts.</p>
<p>Attempts to download grib2 files from three different sources in the
following order:
1. NOAA Operational Model Archive and Distribution System (NOMADS).
2. University of Utah HRRR archive (Pando)
3. Google Cloud Platform (Google)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>DATES</strong> (<em>datetime</em><em> or </em><em>list of datetimes</em>) – A datetime or list of datetimes that represent the model
initialization time for which you want to download.</p></li>
<li><p><strong>searchString</strong> (<em>str</em>) – <p>The string that describes the variables you want to download
from the file. This is used as the <cite>searchString</cite> in
<code class="docutils literal notranslate"><span class="pre">download_hrrr_subset</span></code> to looking for sepecific byte ranges
from the file to download.</p>
<p>Default is None, meaning to not search for variables. Furthermore,
‘:’ is an alias for None, becuase it is equivalent to identifying
every line in the .idx file.</p>
<p>Take a look at the .idx file at
<a class="reference external" href="https://pando-rgw01.chpc.utah.edu/hrrr/sfc/20200624/hrrr.t01z.wrfsfcf17.grib2.idx">https://pando-rgw01.chpc.utah.edu/hrrr/sfc/20200624/hrrr.t01z.wrfsfcf17.grib2.idx</a>
to get familiar with what an index file is.</p>
<p>Also look at this webpage: <a class="reference external" href="http://hrrr.chpc.utah.edu/HRRR_archive/hrrr_sfc_table_f00-f01.html">http://hrrr.chpc.utah.edu/HRRR_archive/hrrr_sfc_table_f00-f01.html</a>
for additional details.**You should focus on the variable and level
field for your searches**.</p>
<p>You may use regular expression syntax to customize your search.
Check out this regulare expression cheatsheet:
<a class="reference external" href="https://link.medium.com/7rxduD2e06">https://link.medium.com/7rxduD2e06</a></p>
<p>Here are a few examples that can help you get started</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">searchString</span></code></p></th>
<th class="head"><p>Messages that will be downloaded</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>’:TMP:2 m’</p></td>
<td><p>Temperature at 2 m.</p></td>
</tr>
<tr class="row-odd"><td><p>’:TMP:’</p></td>
<td><p>Temperature fields at all levels.</p></td>
</tr>
<tr class="row-even"><td><p>’:500 mb:’</p></td>
<td><p>All variables on the 500 mb level.</p></td>
</tr>
<tr class="row-odd"><td><p>’:APCP:’</p></td>
<td><p>All accumulated precipitation fields.</p></td>
</tr>
<tr class="row-even"><td><p>’:UGRD:10 m’</p></td>
<td><p>U wind component at 10 meters.</p></td>
</tr>
<tr class="row-odd"><td><p>’:(U|V)GRD:’</p></td>
<td><p>U and V wind component at all levels.</p></td>
</tr>
<tr class="row-even"><td><p>’:.GRD:’</p></td>
<td><p>(Same as above)</p></td>
</tr>
<tr class="row-odd"><td><p>’:(TMP|DPT):’</p></td>
<td><p>Temperature and Dew Point for all levels .</p></td>
</tr>
<tr class="row-even"><td><p>’:(TMP|DPT|RH):’</p></td>
<td><p>TMP, DPT, and Relative Humidity for all levels.</p></td>
</tr>
<tr class="row-odd"><td><p>’:REFC:’</p></td>
<td><p>Composite Reflectivity</p></td>
</tr>
<tr class="row-even"><td><p>’:surface:’</p></td>
<td><p>All variables at the surface.</p></td>
</tr>
<tr class="row-odd"><td><p>’’</p></td>
<td></td>
</tr>
</tbody>
</table>
</p></li>
<li><p><strong>fxx</strong> (<em>int</em><em> or </em><em>list of ints</em>) – Forecast lead time or list of forecast lead times to download.
Default only grabs analysis hour (f00), but you might want all
the forecasts hours, in that case, you could set <code class="docutils literal notranslate"><span class="pre">fxx=range(0,19)</span></code>.</p></li>
<li><p><strong>model</strong> (<em>{'hrrr'</em><em>, </em><em>'hrrrak'</em><em>, </em><em>'hrrrX'}</em>) – The model type you want to download.
- ‘hrrr’ HRRR Contiguous United States (operational)
- ‘hrrrak’ HRRR Alaska. You can also use ‘alaska’ as an alias.
- ‘hrrrX’ <em>experimental</em> HRRR (experimental version run at ESRL)</p></li>
<li><p><strong>field</strong> (<em>{'prs'</em><em>, </em><em>'sfc'</em><em>, </em><em>'nat'</em><em>, </em><em>'subh'}</em>) – Variable fields you wish to download. Only ‘sfc’ and ‘prs’ are
available on Pando, but ‘nat’ and ‘subh’ might be attainable
from NOMADS or Google.
- ‘sfc’ surface fields
- ‘prs’ pressure fields
- ‘nat’ native fields
- ‘subh’ subhourly fields</p></li>
<li><p><strong>download_dir</strong> (<em>str</em>) – Directory path to save the downloaded HRRR files.</p></li>
<li><p><strong>dryrun</strong> (<em>bool</em>) – If True, instead of downloading the files, it will print out the
files that could be downloaded. This is set to False by default.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – If True, print lots of information (default).
If False, only print some info about download progress.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>The file name for the HRRR files we downloaded and the URL it was from.</em></p></li>
<li><p><em>For example</em> – (‘20170101_hrrr.t00z.wrfsfcf00.grib2’, ‘<a class="reference external" href="https://pando-rgw01">https://pando-rgw01</a>…’)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hrrrb.archive.download_hrrr_subset">
<code class="sig-prename descclassname">hrrrb.archive.</code><code class="sig-name descname">download_hrrr_subset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span></em>, <em class="sig-param"><span class="n">searchString</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">download_dir</span><span class="o">=</span><span class="default_value">WindowsPath('C:/Users/blaylockbk/data')</span></em>, <em class="sig-param"><span class="n">dryrun</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hrrrb.archive.download_hrrr_subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a subset of GRIB fields from a HRRR file located at a URL.</p>
<p>The must be index (.idx) file available for the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>string</em>) – The URL for the HRRR file you are trying to download. There must be an
index file for the GRIB2 file. For example, if
<code class="docutils literal notranslate"><span class="pre">url='https://pando-rgw01.chpc.utah.edu/hrrr/sfc/20200624/hrrr.t01z.wrfsfcf17.grib2'</span></code>,
then <code class="docutils literal notranslate"><span class="pre">https://pando-rgw01.chpc.utah.edu/hrrr/sfc/20200624/hrrr.t01z.wrfsfcf17.grib2.idx</span></code>
must also exist.</p></li>
<li><p><strong>searchString</strong> (<em>str</em>) – <p>The string you are looking for in each line of the index file.
Take a look at the <code class="docutils literal notranslate"><span class="pre">.idx</span></code> file at
<a class="reference external" href="https://pando-rgw01.chpc.utah.edu/hrrr/sfc/20200624/hrrr.t01z.wrfsfcf17.grib2.idx">https://pando-rgw01.chpc.utah.edu/hrrr/sfc/20200624/hrrr.t01z.wrfsfcf17.grib2.idx</a>
to get familiar with what is in each line.
Also, look at this webpage: <a class="reference external" href="http://hrrr.chpc.utah.edu/HRRR_archive/hrrr_sfc_table_f00-f01.html">http://hrrr.chpc.utah.edu/HRRR_archive/hrrr_sfc_table_f00-f01.html</a>
for additional details.**TIP: Focus on the variable and level type in
your searches**.</p>
<p>You may use regular expression syntax to customize your search.
Check out this regular expression cheatsheet:
<a class="reference external" href="https://link.medium.com/7rxduD2e06">https://link.medium.com/7rxduD2e06</a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Here are a few examples that can help you get started</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">searchString</span></code></p></th>
<th class="head"><p>GRIB messages that will be downloaded</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>’:TMP:2 m’</p></td>
<td><p>Temperature at 2 m.</p></td>
</tr>
<tr class="row-odd"><td><p>’:TMP:’</p></td>
<td><p>Temperature fields at all levels.</p></td>
</tr>
<tr class="row-even"><td><p>’:500 mb:’</p></td>
<td><p>All variables on the 500 mb level.</p></td>
</tr>
<tr class="row-odd"><td><p>’:APCP:’</p></td>
<td><p>All accumulated precipitation fields.</p></td>
</tr>
<tr class="row-even"><td><p>’:UGRD:10 m’</p></td>
<td><p>U wind component at 10 meters.</p></td>
</tr>
<tr class="row-odd"><td><p>’:(U|V)GRD:’</p></td>
<td><p>U and V wind component at all levels.</p></td>
</tr>
<tr class="row-even"><td><p>’:.GRD:’</p></td>
<td><p>(Same as above)</p></td>
</tr>
<tr class="row-odd"><td><p>’:(TMP|DPT):’</p></td>
<td><p>Temperature and Dew Point for all levels .</p></td>
</tr>
<tr class="row-even"><td><p>’:(TMP|DPT|RH):’</p></td>
<td><p>TMP, DPT, and Relative Humidity for all levels.</p></td>
</tr>
<tr class="row-odd"><td><p>’:REFC:’</p></td>
<td><p>Composite Reflectivity</p></td>
</tr>
<tr class="row-even"><td><p>’:surface:’</p></td>
<td><p>All variables at the surface.</p></td>
</tr>
</tbody>
</table>
</div>
</p></li>
<li><p><strong>download_dir</strong> (<em>string</em>) – Directory path to save the file, default <code class="docutils literal notranslate"><span class="pre">~/data/</span></code>.</p></li>
<li><p><strong>dryrun</strong> (<em>bool</em>) – If True, do not perform download, but print out what the function will
attempt to do.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – If True, print lots of details (default)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>The path and name of the new file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hrrrb.archive.get_hrrr">
<code class="sig-prename descclassname">hrrrb.archive.</code><code class="sig-name descname">get_hrrr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">DATE</span></em>, <em class="sig-param"><span class="n">searchString</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">fxx</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">DATE_is_valid_time</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">remove_grib2</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">add_crs</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">download_kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hrrrb.archive.get_hrrr" title="Permalink to this definition">¶</a></dt>
<dd><p>Download HRRR data and return as an xarray Dataset (or Datasets)</p>
<p>Only request one <cite>DATE</cite> and <cite>fxx</cite> (forecast lead time).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>DATE</strong> (<em>datetime</em>) – A single datetime object.</p></li>
<li><p><strong>searchString</strong> (<em>string</em>) – <p>A string representing a field or fields from the GRIB2 file.
See more details in <code class="docutils literal notranslate"><span class="pre">download_hrrr</span></code> docstring.</p>
<p>Some examples:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">searchString</span></code></p></th>
<th class="head"><p>Messages that will be downloaded</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>’:TMP:2 m’</p></td>
<td><p>Temperature at 2 m.</p></td>
</tr>
<tr class="row-odd"><td><p>’:TMP:’</p></td>
<td><p>Temperature fields at all levels.</p></td>
</tr>
<tr class="row-even"><td><p>’:500 mb:’</p></td>
<td><p>All variables on the 500 mb level.</p></td>
</tr>
<tr class="row-odd"><td><p>’:APCP:’</p></td>
<td><p>All accumulated precipitation fields.</p></td>
</tr>
<tr class="row-even"><td><p>’:UGRD:10 m’</p></td>
<td><p>U wind component at 10 meters.</p></td>
</tr>
<tr class="row-odd"><td><p>’:(U|V)GRD:’</p></td>
<td><p>U and V wind component at all levels.</p></td>
</tr>
<tr class="row-even"><td><p>’:.GRD:’</p></td>
<td><p>(Same as above)</p></td>
</tr>
<tr class="row-odd"><td><p>’:(TMP|DPT):’</p></td>
<td><p>Temperature and Dew Point for all levels .</p></td>
</tr>
<tr class="row-even"><td><p>’:(TMP|DPT|RH):’</p></td>
<td><p>TMP, DPT, and Relative Humidity for all levels.</p></td>
</tr>
<tr class="row-odd"><td><p>’:REFC:’</p></td>
<td><p>Composite Reflectivity</p></td>
</tr>
<tr class="row-even"><td><p>’:surface:’</p></td>
<td><p>All variables at the surface.</p></td>
</tr>
</tbody>
</table>
</p></li>
<li><p><strong>fxx</strong> (<em>int</em>) – Forecast lead time. Default will get the analysis, F00.</p></li>
<li><p><strong>DATE_is_valid_time</strong> (<em>bool</em>) – <dl class="simple">
<dt>False - (default) The DATE argument represents the model</dt><dd><p>initialization datetime.</p>
</dd>
<dt>True  - The DATE argument represents the model valid time.</dt><dd><p>This is handy when you want a specific forecast leadtime
that is valid at a certian date.</p>
</dd>
</dl>
</p></li>
<li><p><strong>remove_grib2</strong> (<em>bool</em>) – <dl class="simple">
<dt>True  - (default) Delete the GRIB2 file after reading into a Dataset.</dt><dd><p>This requires a copy to memory, so it might slow things down.</p>
</dd>
<dt>False - Keep the GRIB2 file downloaded.</dt><dd><p>This might be a better option performance-wise, because it
does not need to copy the data but keeps the file on disk.
You would be responsible for removing files when you don’t
need them.</p>
</dd>
</dl>
</p></li>
<li><p><strong>add_crs</strong> (<em>bool</em>) – <dl class="simple">
<dt>True  - (default) Append the Cartopy coordinate reference system (crs)</dt><dd><p>projection as an attribute to the Dataset.</p>
</dd>
</dl>
</p></li>
<li><p><strong>**download_kwargs</strong> – Any other key word argument accepted by <code class="docutils literal notranslate"><span class="pre">download_hrrr</span></code>.
{model, field, download_dir, dryrun, verbose}</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hrrrb.archive.outFile_from_url">
<code class="sig-prename descclassname">hrrrb.archive.</code><code class="sig-name descname">outFile_from_url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span></em>, <em class="sig-param"><span class="n">download_dir</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hrrrb.archive.outFile_from_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the filename for a grib2 file from its URL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>str</em>) – A URL string for a grib2 file we want to download.</p></li>
<li><p><strong>download_dir</strong> (<em>dir</em>) – The directory path to save the file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>
<span class="target" id="module-hrrrb.tools"></span><div class="section" id="tools-for-the-hrrr-archive">
<h2>Tools for the HRRR Archive<a class="headerlink" href="#tools-for-the-hrrr-archive" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>to_180</dt><dd><p>For longitude values to be from -180 W to 180 E (not 0-360 E).</p>
</dd>
<dt>get_crs</dt><dd><p>Get cartopy projection object from xarray.Dataset</p>
</dd>
<dt>pluck_points</dt><dd><p>Pluck values at specific latitude/longitude points.</p>
</dd>
</dl>
<p><strong>Functions:</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#hrrrb.tools.concat_hrrr" title="hrrrb.tools.concat_hrrr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">concat_hrrr</span></code></a>(DATES, searchString[, fxxs])</p></td>
<td><p>Download variables</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hrrrb.tools.get_crs" title="hrrrb.tools.get_crs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_crs</span></code></a>(ds)</p></td>
<td><p>Get the cartopy coordinate reference system (crs) from a cfgrib xarray Dataset</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hrrrb.tools.pluck_points" title="hrrrb.tools.pluck_points"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pluck_points</span></code></a>(ds, points[, names, …])</p></td>
<td><p>Pluck values at point nearest a give list of latitudes and longitudes pairs.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hrrrb.tools.to_180" title="hrrrb.tools.to_180"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_180</span></code></a>(lon)</p></td>
<td><p>Wrap longitude from degrees [0, 360] to degrees [-180, 180].</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt id="hrrrb.tools.concat_hrrr">
<code class="sig-prename descclassname">hrrrb.tools.</code><code class="sig-name descname">concat_hrrr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">DATES</span></em>, <em class="sig-param"><span class="n">searchString</span></em>, <em class="sig-param"><span class="n">fxxs</span><span class="o">=</span><span class="default_value">range(0, 19)</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">get_hrrr_kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hrrrb.tools.concat_hrrr" title="Permalink to this definition">¶</a></dt>
<dd><p>Download variables</p>
</dd></dl>

<dl class="py function">
<dt id="hrrrb.tools.get_crs">
<code class="sig-prename descclassname">hrrrb.tools.</code><code class="sig-name descname">get_crs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hrrrb.tools.get_crs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the cartopy coordinate reference system (crs) from a cfgrib xarray Dataset</p>
<p>Projection in formation is from the grib2 message for each variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ds</strong> (<em>xarray.Dataset</em>) – An xarray.Dataset from a GRIB2 file opened by the cfgrib engine.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hrrrb.tools.pluck_points">
<code class="sig-prename descclassname">hrrrb.tools.</code><code class="sig-name descname">pluck_points</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ds</span></em>, <em class="sig-param"><span class="n">points</span></em>, <em class="sig-param"><span class="n">names</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dist_thresh</span><span class="o">=</span><span class="default_value">10000</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hrrrb.tools.pluck_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Pluck values at point nearest a give list of latitudes and longitudes pairs.</p>
<p>Uses a nearest neighbor approach to get the values. The general
methodology is illustrated in this
<a class="reference external" href="https://github.com/blaylockbk/pyBKB_v3/blob/master/demo/Nearest_lat-lon_Grid.ipynb">GitHub Notebook</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds</strong> (<em>xarray.Dataset</em>) – The Dataset should include coordinates for both ‘latitude’ and
‘longitude’.</p></li>
<li><p><strong>points</strong> (<em>tuple</em><em> or </em><em>list of tuples</em>) – The latitude and longitude (lat, lon) coordinate pair (as a tuple)
for the points you want to pluck from the gridded Dataset.
A list of tuples may be given to return the values from multiple points.</p></li>
<li><p><strong>names</strong> (<em>list</em>) – A list of names for each point location (i.e., station name).
None will not append any names. names should be the same
length as points.</p></li>
<li><p><strong>dist_thresh</strong> (<em>int</em><em> or </em><em>float</em>) – The maximum distance (m) between a plucked point and a matched point.
Default is 10,000 m. If the distance is larger than this, the point
is disregarded.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>The Dataset values at the points nearest the requested lat/lon points.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hrrrb.tools.to_180">
<code class="sig-prename descclassname">hrrrb.tools.</code><code class="sig-name descname">to_180</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lon</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hrrrb.tools.to_180" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap longitude from degrees [0, 360] to degrees [-180, 180].</p>
<dl class="simple">
<dt>An alternative method is</dt><dd><p>lon[lon&gt;180] -= 360</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>lon</strong> (<em>array_like</em>) – Longitude values</p>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-hrrrb.plots"></span><div class="section" id="hrrr-plots">
<h2>HRRR Plots<a class="headerlink" href="#hrrr-plots" title="Permalink to this headline">¶</a></h2>
<p><strong>Functions:</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#hrrrb.plots.simple_plot" title="hrrrb.plots.simple_plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">simple_plot</span></code></a>(ds[, ax])</p></td>
<td><p>Make a simple plot for each variable.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt id="hrrrb.plots.simple_plot">
<code class="sig-prename descclassname">hrrrb.plots.</code><code class="sig-name descname">simple_plot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ds</span></em>, <em class="sig-param"><span class="n">ax</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hrrrb.plots.simple_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a simple plot for each variable.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="utils.html" class="btn btn-neutral float-right" title="Utilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to HRRR-B’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Brian K. Blaylock

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>